{% extends "plugins/admin/templates/content/entries/base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-5">
        <div class="workspace-header row">
            <div class="col p-0"><h2>Create New Entry</h2></div>
        </div>
        <div class="workspace-rounded px-4 py-4 mb-3">
            {% set fieldsetContent = filesystem().file(PATH_PROJECT ~ '/fieldsets/admin-entries-add.yaml').get() %}

            {% set fieldset = arrays(flextype.serializers.yaml.decode(fieldsetContent))
                                .set('form.fields.current_id.value', current_id)
                                .set('form.fields.routable.options', {0: __('admin_no'), 1: __('admin_yes')})
                                .set('form.fields.visibility.options', {'visible': __('admin_visible'),
                                                                        'hidden': __('admin_hidden'),
                                                                        'draft': __('admin_draft')})
                                .set('form.fields.type.options', fieldsets) %}

            {{ flextype.form.render(fieldset.toArray())|raw }}
        </div>
        <div class="d-flex justify-content-end">
            <a href="{{ cancelUrl }}" class="btn btn-link">Cancel</a>
            <div class="btn-group">
              <a id="createEntry"
                 name="create_entry"
                 href="javascript:void(0);"
                 data-redirect="index"
                 class="btn btn-primary js-submit-entry-create-form">{{ __('admin_create') }}</a>
              <button type="button" class="btn btn-primary dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                <span class="visually-hidden">Toggle Dropdown</span>
              </button>
              <ul class="dropdown-menu">
                <li><a id="createEntry"
                   name="create_entry"
                   href="javascript:void(0);"
                   data-redirect="edit"
                   class="dropdown-item js-submit-entry-create-form">{{ __('admin_create_and_edit') }}</a></li>
                <li><a id="createEntry"
                   name="create_entry"
                   href="javascript:void(0);"
                   data-redirect="add"
                   class="dropdown-item js-submit-entry-create-form">{{ __('admin_create_and_add') }}</a></li>
              </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}
