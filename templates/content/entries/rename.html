{% extends "plugins/admin/templates/content/entries/base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-5">
        <div class="workspace-header row">
            <div class="col p-0"><h2>Rename Entry</h2></div>
        </div>
        <div class="workspace-rounded px-4 py-4 mb-3">
            {% set fieldsetContent = filesystem().file(PATH_PROJECT ~ '/fieldsets/admin-entries-rename.yaml').get() %}

            {% set fieldset = arrays(flextype.serializers.yaml.decode(fieldsetContent))
                                .set('form.fields.entry_path_current.value', entry_path_current)
                                .set('form.fields.entry_parent.value', entry_parent)
                                .set('form.fields.name_current.value', name_current)
                                .toArray() %}

            {{ flextype.form.render(fieldset)|raw }}

            <form method="post" name="form_entries_rename" data-parsley-validate>
                {{ csrf() }}
                <input type="hidden" name="entry_path_current" value="{{ entry_path_current }}">
                <input type="hidden" name="entry_parent" value="{{ entry_parent }}">
                <input type="hidden" name="name_current" value="{{ name_current }}">
                <div class="mb-3">
                    <label for="entryName" class="form-label">{{ __('admin_name') }}</label>
                    <input type="text" id="entryName" name="name" value="{{name_current}}" class="form-control" required="required" data-parsley-minlength="1" data-parsley-error-message="{{ __('admin_error_title_empty_input') }}" data-parsley-required="true">
                    <small>{{ __('admin_help_text_for_entry_name') }}</small>
                </div>
            </form>
        </div>
        <div class="d-flex justify-content-end">
            <a href="{{ cancelUrl }}" class="btn btn-link">Cancel</a>
            <a
               href="javascript:void(0);"
               class="btn btn-primary js-submit-entry-rename-form">{{ __('admin_save') }}</a>
        </div>
    </div>
</div>
{% endblock %}
